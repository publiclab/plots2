<h1>Activity</h1>

<h4><b> Choose a date range to view statistics for</b></h4>
<%= form_tag request.url, method: 'get' do %>
    <div class="row">
        <div class="col-md-8 well">
            <span style="font-size: 1.25em; color:#3071a9">
                <i class="fa fa-calendar" style="font-size: 2em;"></i> From <%= @start.to_formatted_s(:long) %> to <%= @end.to_formatted_s(:long) %>
        </span>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8">
            <h5> Date Range </h5>
            <%= select_tag :options, options_for_select(["Week", "Month","Year"]), prompt: "Choose a period to view statistics for",
                class: " form-control input-lg", onchange: "this.form.submit();" %>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4">
            <h3><label class="label label-primary">Starting</label></h3>
            <input data-provide="datepicker" data-date="<%= DateTime.now.strftime("%d-%m-%Y") %>" data-date-format="dd-mm-yyyy"  top="10px" tabindex="1" class="form-control input-lg" type="text" name="start" value="<%= (DateTime.now - 1.weeks).strftime("%d-%m-%Y") %>" />
        </div>
        <div class="col-md-4">
            <h3><label class="label label-primary">Ending</label></h3>
            <input data-provide="datepicker" data-date="<%= DateTime.now.strftime("%d-%m-%Y") %>"   data-date-format="dd-mm-yyyy" tabindex="1" class="form-control input-lg" type="text" name="end" value="<%= DateTime.now.strftime("%d-%m-%Y") %>" />
        </div>
        <div class="col-md-2">
            <br> <br> <br> 
            <%= button_tag type: 'submit' , class: 'btn btn-primary' do %>
                <i class="fa fa-chevron-right fa-2x"></i>
            <% end %>
        </div>
    </div>
<% end %>
</div>
<hr />

<table class="table">
  <tr>
    <td><%= @notes %></td>
    <td>notes in this period</td>
  </tr>
  <tr>
    <%= @wikis %></td>
    wiki edits in this period</td>
  </tr>
  <tr>
    <td><%= @people %></td>
    <td>new member registrations in this period</td>
  </tr>
  <tr>
    <td><%= @answers %></td>
    <td>answers posted in this period</td>
  </tr>
  <tr>
    <td><%= @comments %></td>
    <td>comments posted in this period</td>
  </tr>
  <tr>
    <td><%= @questions.count %></td>
    <td>questions posted in this period</td>
  </tr>
  <tr>
    <td><%= @contributors %></td>
    <td>contributors in this period</td>
  </tr>
</table>

<p><i>Member registration may include spam accounts</i></p>

<p>
  Back by:
  <a href="/stats/range/<%= (@start - 1.week).to_formatted_s(:long)   %>/<%= (@end - 1.week).to_formatted_s(:long)   %>">one week</a>,
  <a href="/stats/range/<%= (@start - 1.month).to_formatted_s(:long)  %>/<%= (@end - 1.month).to_formatted_s(:long)  %>">one month</a>,
  <a href="/stats/range/<%= (@start - 3.months).to_formatted_s(:long) %>/<%= (@end - 3.months).to_formatted_s(:long) %>">three months</a>,
  <a href="/stats/range/<%= (@start - 1.year).to_formatted_s(:long)   %>/<%= (@end - 1.year).to_formatted_s(:long)   %>">one year</a>
</p>

<p>
  Forward by:
  <a href="/stats/range/<%= (@start + 1.week).to_formatted_s(:long)   %>/<%= (@end + 1.week).to_formatted_s(:long)   %>">one week</a>,
  <a href="/stats/range/<%= (@start + 1.month).to_formatted_s(:long)  %>/<%= (@end + 1.month).to_formatted_s(:long)  %>">one month</a>,
  <a href="/stats/range/<%= (@start + 3.months).to_formatted_s(:long) %>/<%= (@end + 3.months).to_formatted_s(:long) %>">three months</a>,
  <a href="/stats/range/<%= (@start + 1.year).to_formatted_s(:long)   %>/<%= (@end + 1.year).to_formatted_s(:long)   %>">one year</a>
</p>
