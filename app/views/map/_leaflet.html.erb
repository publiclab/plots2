<% unique_id = rand(10) %>
<style>
#map<%= unique_id %> { width:100%; height:300px; margin: 0; position: relative;}

#map<%= unique_id %>:after {
    width: 22px;
    height: 40px;
    display: block;
    content: ' ';
    position: absolute;
    top: 50%; left: 50%;
    margin: -40px 0 0 -11px;
    background: url('https://publiclab.org/assets/leaflet/dist/images//marker-icon.png');
    background-size: 22px 40px;
    pointer-events: none;
}
</style>
<div id="map<%= unique_id %>"></div>
<script>
    var map = L.map('map<%= unique_id %>').setView([<%= lat %>,<%= lon %>], 10);
    L.tileLayer("https://a.tiles.mapbox.com/v3/jywarren.map-lmrwb2em/{z}/{x}/{y}.png").addTo(map);

    <% items.each do |item| %>
    L.marker([<%= item.lat %>, <%= item.lon %>]).addTo(map).bindPopup("<a href='/<%= item.path %>'><%= item.title %></a>");
    <% end %>
</script>
